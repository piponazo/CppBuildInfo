#pragma once

#include "cbi_export.h"

#include <QString>
#include <vector>
#include <memory>

struct TranslationUnit;

/// @brief Parses the file generated by the console application and extract information.
///
/// Obtain the information about all the CompilationProcess (es) that exists in the file generated by the
/// command line application.
class DataParser
{
public:
    CBI_EXPORT DataParser();
    CBI_EXPORT ~DataParser();

    /// @brief Gets CompilationProcess (es) parsed.
    CBI_EXPORT const std::vector<TranslationUnit> getAllProcesses() const;

    CBI_EXPORT bool parse(const QString &path);

private:
    struct Pimpl;
    std::unique_ptr<Pimpl> _impl;
};
